{% extends 'basic.html' %}

{% block title %}{{product.Name}}-My awesome cart{% endblock %}
{% block body %}
    <div class="container my-4">
        <div class="row">
        <div class="col-md-4">
            <div class="row">
                <img src="/media/{{product.image}}" alt="" width=360px height=300px>
                <!-- <button class="btn btn-danger mx-3 my-4">Buy Now</button>
            <button class="btn btn-primary  mx-3 my-4">Add To Cart</button> -->
            </div>
        </div>
        <div class="col-md-8">
            <h1>{{product.Name}}</h1>
            <p><b>TK.{{product.Price}}</b></p>
            <p>{{product.Description}}</p>
            <button class="btn btn-danger">Buy Now</button>
            <button id="{{product.id}}" class="btn btn-primary cart">Add To Cart</button>
        </div>
        </div>
    </div>
{% endblock %}
{% block js %}
<script>
    // localStorage.clear()
    if (localStorage.getItem('cart') == null) {
        cart = {}
    }
    else {
        cart = JSON.parse(localStorage.getItem('cart'))
        document.getElementById('cart').innerHTML = Object.keys(cart).length
    }
    $('.cart').click(function () {
        console.log('clicked');
        idstr = this.id.toString()
        if (cart[idstr] != undefined) {
            cart[idstr] = cart[idstr] + 1
        }
        else {
            cart[idstr] = 1
        }
        console.log(cart)
        localStorage.setItem('cart', JSON.stringify(cart))
    })
    $('#popcart').popover()
    document.getElementById('popcart').setAttribute('data-content','<h5>Cart for your items on our shop</h5>');

</script>
{% endblock %}